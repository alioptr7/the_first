# Worker vs Beat - ุณุงุฏูโุชุฑู ุชูุถุญ

## ๐ ูุฑู ุจู Worker ู Beat

### **ูุซุงู ุณุงุฏู: ฺฉ ูุงููุง**

```
ูุงููุง = System Response Network
```

---

## **1๏ธโฃ Worker = ฺฉุงุฑฺฏุฑ ูุงููุง**

```
ฺฉุงุฑฺฏุฑ ูุงููุง:
โโ ููุชุธุฑ ุงุณุช: ูู ฺู ฺฉุงุฑ ุงูุฌุงู ุจุฏููุ
โโ ฺฉ ฺฉุงุฑ ุดุฑูุน ุดูุฏุ ููุช ุณูุงุฑุด ุจุงุฏ!
โโ ุงุฌุฑุงุก: ุณูุงุฑุด ุฑุง ุจุณุงุฒ

ูุซุงู:
โโ ุณูุงุฑุด 1: "100 ุนุฏุฏ ูุงู" โ ฺฉุงุฑฺฏุฑ ูุณุงุฒุฏ โ
โโ ุณูุงุฑุด 2: "200 ฺฉฺฉ" โ ฺฉุงุฑฺฏุฑ ูุณุงุฒุฏ โ
โโ ุณูุงุฑุด 3: "50 ุดุฑู" โ ฺฉุงุฑฺฏุฑ ูุณุงุฒุฏ โ
```

**ุฏุฑ Celery:**
```python
celery -A workers.celery_app worker
```

```
Worker:
โโ ููุชุธุฑ ุงุณุช: ฺู task ุฏุฑุฎูุงุณุช ุดุฏูุ
โโ ฺฉ ุดุฑูุน ุดูุฏุ ููุช task ุฏุฑ Queue ุจุงุฏ!
โโ ุงุฌุฑุงุก: task ุฑุง ุงุฌุฑุง ฺฉู

ูุซุงู:
โโ Task 1: export_settings โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
โโ Task 2: export_results โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
โโ Task 3: cache_maintenance โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
```

---

## **2๏ธโฃ Beat = ุตุงุญุจ ูุงููุง (ุณุงุนุช ุฏุงุฑ)**

```
ุตุงุญุจ ูุงููุง:
โโ ูุฑ ุฑูุฒ ุณุงุนุช 6 ุตุจุญ: "ฺฉุงุฑฺฏุฑ! 100 ูุงู ุจุณุงุฒ"
โโ ูุฑ ุฑูุฒ ุณุงุนุช 10 ุตุจุญ: "ฺฉุงุฑฺฏุฑ! 200 ฺฉฺฉ ุจุณุงุฒ"
โโ ูุฑ ุฑูุฒ ุณุงุนุช 3 ุนุตุฑ: "ฺฉุงุฑฺฏุฑ! 50 ุดุฑู ุจุณุงุฒ"

ูุซุงู:
โโ ุณุงุนุช 6:00 โ ุณูุงุฑุด ููุฑุณุชุฏ (Worker ูุณุงุฒุฏ)
โโ ุณุงุนุช 10:00 โ ุณูุงุฑุด ููุฑุณุชุฏ (Worker ูุณุงุฒุฏ)
โโ ุณุงุนุช 15:00 โ ุณูุงุฑุด ููุฑุณุชุฏ (Worker ูุณุงุฒุฏ)
```

**ุฏุฑ Celery:**
```python
celery -A workers.celery_app beat
```

```
Beat:
โโ ูุฑ 60 ุซุงูู: "Worker! export_settings ุฑุง ุงุฌุฑุง ฺฉู"
โโ ูุฑ 120 ุซุงูู: "Worker! export_results ุฑุง ุงุฌุฑุง ฺฉู"
โโ ูุฑ 300 ุซุงูู: "Worker! monitoring ุฑุง ุงุฌุฑุง ฺฉู"

ูุซุงู:
โโ 14:30:00 โ Task ููุฑุณุชุฏ โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
โโ 14:31:00 โ Task ููุฑุณุชุฏ โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
โโ 14:32:00 โ Task ููุฑุณุชุฏ โ Worker ุงุฌุฑุง ูโฺฉูุฏ โ
```

---

## ๐ ููู: ุขููุง ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุฏุ

```
Timeline:

14:30:00
  Beat: "ุฎุจ! ุงูุงู export_settings ุจุงุฏ ุงุฌุฑุง ุดูุฏ!"
    โ (ููุฑุณุชุฏ ุจุฑุง)
  Queue: [export_settings task ุงุถุงูู ุดุฏ]
    โ (worker ูุฎูุงูุฏ)
  Worker: "ุณูุงุฑุด ุฌุฏุฏ! ุดุฑูุน ูโฺฉูู..."
    โ (14:30:05)
  Worker: "โ export_settings ุชูุงู ุดุฏ"

14:31:00
  Beat: "ุฎุจ! ุงูุงู export_results ุจุงุฏ ุงุฌุฑุง ุดูุฏ!"
    โ (ููุฑุณุชุฏ ุจุฑุง)
  Queue: [export_results task ุงุถุงูู ุดุฏ]
    โ (worker ูุฎูุงูุฏ)
  Worker: "ุณูุงุฑุด ุฌุฏุฏ! ุดุฑูุน ูโฺฉูู..."
    โ (14:31:30)
  Worker: "โ export_results ุชูุงู ุดุฏ"
```

---

## ๐ฏ ุงฺฏุฑ ููุท ฺฉ ุงุฌุฑุง ุดูุฏ:

### **ุตุฑูุงู Worker (ุจุฏูู Beat):**
```
ุขุง ฺฉุงุฑ ูโฺฉูุฏุ
โโ ุงฺฏุฑ ฺฉุณ task ุฏุฑุฎูุงุณุช ฺฉูุฏ: โ ุจูู! Worker ุงุฌุฑุง ูโฺฉูุฏ
โโ ุงฺฏุฑ ุชููุง ููุชุธุฑ ุงุณุช: โ ูู! ฺุฒ ุงุฌุฑุง ููโุดูุฏ

ูุซุงู ูุงููุง:
โโ ุงฺฏุฑ ฺฉุณ ุณูุงุฑุด ุจุฏูุฏ: โ ฺฉุงุฑฺฏุฑ ูุณุงุฒุฏ
โโ ุงฺฏุฑ ุตุงุญุจ ุณูุงุฑุด ูุฏุงุฏ: โ ฺฉุงุฑฺฏุฑ ุฎูุงุจ ูโุฑูุฏ
```

**ูุชุฌู:** Scheduled tasks ุงุฌุฑุง ููโุดููุฏ!

---

### **ุตุฑูุงู Beat (ุจุฏูู Worker):**
```
ุขุง ฺฉุงุฑ ูโฺฉูุฏุ
โโ Beat: "export_settings ุงุฌุฑุง ุดูุฏ!"
โโ Queue: โ task ุงุถุงูู ุดุฏ
โโ ฺฉ ุงุฌุฑุง ุดูุฏุ โ ูฺฺฉุณ ุงุฌุฑุง ููโฺฉูุฏ!

ูุซุงู ูุงููุง:
โโ ุตุงุญุจ: "100 ูุงู ุจุณุงุฒ!"
โโ ุณูุงุฑุด: ุฏูุชุฑ ุณูุงุฑุด ููุดุชู ุดุฏ
โโ ฺฉุงุฑฺฏุฑ: โ ุณูุงุฑุด ุฏุฏู ุงุณุช
โโ ุงูุง ฺฉุงุฑฺฏุฑ ุฎูุงุจ ุงุณุช! โ
```

**ูุชุฌู:** Taskโูุง Queue ูุดููุฏ ูู ุงุฌุฑุง ููโุดููุฏ!

---

## โ ูพุงุณุฎ ูุณุชูู ุณุคุงู ุดูุง:

### **ฺุฑุง ุฏู ุฏุณุชูุฑ ุฌุฏุงฺฏุงููุ**

**ุฒุฑุง ุฏู ููุด ูุชูุงูุช ุฏุงุฑูุฏ:**

| ุฏุณุชูุฑ | ููุด | ฺฉุงุฑ |
|--------|-----|------|
| **worker** | ุงุฌุฑุงฺฉููุฏู | ุชุณฺฉโูุง ุฑุง ุงุฌุฑุง ูโฺฉูุฏ |
| **beat** | ุจุฑูุงููโุฑุฒ | ุชุณฺฉโูุง ุฑุง Schedule ูโฺฉูุฏ |

---

## ๐ ุจุฑุง Response Network (ูุฑ ุฏู ุงูุฒุงู ุงุณุช!):

```powershell
# Terminal 1: Beat (ุจุฑูุงููโุฑุฒ)
cd c:\Users\win\the_first\response-network\api
celery -A workers.celery_app beat --loglevel=info

# Terminal 2: Worker (ุงุฌุฑุงฺฉููุฏู)
cd c:\Users\win\the_first\response-network\api
celery -A workers.celery_app worker --loglevel=info

# Terminal 3: FastAPI Server
cd c:\Users\win\the_first\response-network\api
python -m uvicorn main:app --host 127.0.0.1 --port 8000
```

---

## ๐ ูููุฏุงุฑ ฺฉุงูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FastAPI Server (127.0.0.1:8000)                    โ
โ โโ API Endpoints                                   โ
โ โโ /api/v1/settings/export/now (ุฏุณุชูุฑ)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
         โโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ
         โ               โ               โ
    โโโโโโผโโโโโโ   โโโโโโผโโโโโโ  โโโโโโโผโโโโโโโ
    โ   Beat    โ   โ  Worker  โ  โ   Redis    โ
    โโโโโโโโโโโโโค   โโโโโโโโโโโโค  โโโโโโโโโโโโโโค
    โ Schedule: โ   โ Processes:  โ Queue:     โ
    โ ูุฑ 60s:   โ   โ ุงุฌุฑุง tasks โ Tasks ุงูุฌุงโ
    โ export... โ   โ            โ ุฐุฎุฑู ูโุดุฏ โ
    โ           โ   โ Workers: 4 โ            โ
    โโโโโโโฌโโโโโโ   โโโโโโฌโโโโโโโ  โโโโโโโโโโโโโโ
          โ              โ
          โโโโโโโโฌโโโโโโโโ
                 โ (Beat ููุฑุณุชุฏ,
                 โ  Worker ุงุฌุฑุง ูโฺฉูุฏ)
          โโโโโโโโผโโโโโโโโโโโ
          โ Task Execution  โ
          โโโโโโโโโโโโโโโโโโโค
          โโ Task 1: OK    โ
          โโ Task 2: OK    โ
          โโ Task 3: OK    โ
          โโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุฎูุงุตู:

```
ุณูู ู ุณุงุฏู:
โโ worker = ฺฉุณ ฺฉู ฺฉุงุฑ ูโฺฉูุฏ
โโ beat = ฺฉุณ ฺฉู ฺฏูุชุงุฑ "ุงูุงู ฺฉุงุฑ ฺฉู!"
โโ redis = ุตูุฏูู ุณูุงุฑุดโูุง
โโ fastapi = ุฏุฑุจ ู ูพูุฌุฑู ุณุณุชู
```

**ูููโ ุณู ุงูุฒุงูโุงูุฏ ุจุฑุง ฺฉุงุฑ ุตุญุญ!** โ

