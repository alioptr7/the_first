# Alembic Migrations - Ù…Ø¯ÛŒØ±ÛŒØª ØªØºÛŒÛŒØ±Ø§Øª Schema

## ğŸ¯ Ù…Ø³Ø¦Ù„Ù‡: ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ø¬Ø¯Ø§ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯

ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ø¬Ø¯ÙˆÙ„ `users` Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª:

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY,
    username VARCHAR(100) NOT NULL,
    email VARCHAR(255) NOT NULL
);
```

### â“ Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒÙ… Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…: `phone` field

```sql
ALTER TABLE users ADD COLUMN phone VARCHAR(20);
```

---

## ğŸš¨ Ù…Ø³Ø§Ø¦Ù„ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ

### **1ï¸âƒ£ Ù…Ø³Ø¦Ù„Ù‡: Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ú†Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŸ**

```python
# Ù‚Ø¨Ù„ Ø§Ø² migration
SELECT * FROM users;
# â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ id â”‚ username â”‚ email           â”‚
# â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ 1  â”‚ "admin"  â”‚ "admin@ex.com"  â”‚
# â”‚ 2  â”‚ "user1"  â”‚ "user1@ex.com"  â”‚
# â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Ø¨Ø¹Ø¯ Ø§Ø² migration
SELECT * FROM users;
# â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ id â”‚ username â”‚ email           â”‚ phone  â”‚
# â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ 1  â”‚ "admin"  â”‚ "admin@ex.com"  â”‚ NULL   â”‚  â† Ø¯Ø§Ø¯Ù‡ Ù‚Ø¨Ù„ÛŒ Ù…Ø­ÙÙˆØ¸!
# â”‚ 2  â”‚ "user1"  â”‚ "user1@ex.com"  â”‚ NULL   â”‚  â† Ø¯Ø§Ø¯Ù‡ Ù‚Ø¨Ù„ÛŒ Ù…Ø­ÙÙˆØ¸!
# â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯!
âœ… Ø³ØªÙˆÙ† Ø¬Ø¯ÛŒØ¯ NULL Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯
```

---

## ğŸ“‹ Ø§Ù†ÙˆØ§Ø¹ Migrations

### **1. Adding Column (Ø§ÛŒÙ…Ù†)**
```python
# migration file: 001_add_phone_to_users.py

def upgrade():
    op.add_column('users', sa.Column('phone', sa.String(20), nullable=True))

def downgrade():
    op.drop_column('users', 'phone')

# Ù†ØªÛŒØ¬Ù‡: âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ù…Ø­ÙÙˆØ¸
#       âŒ Ø³ØªÙˆÙ† Ø¬Ø¯ÛŒØ¯ NULL Ø§Ø³Øª (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ update Ø¨Ø§Ø´Ø¯)
```

---

### **2. Dropping Column (Ø®Ø·Ø±Ù†Ø§Ú©)**
```python
# migration file: 002_remove_phone_from_users.py

def upgrade():
    op.drop_column('users', 'phone')

def downgrade():
    op.add_column('users', sa.Column('phone', sa.String(20)))

# Ù†ØªÛŒØ¬Ù‡: âŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù† Ø³ØªÙˆÙ† Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯!
#       âœ… Ú©Ø³ÛŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¢Ù† Ø±Ø§ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯
```

---

### **3. Renaming Column (Ù…Ø´Ú©Ù„â€ŒØ¯Ø§Ø±)**
```python
# migration file: 003_rename_phone_to_mobile.py

def upgrade():
    op.alter_column('users', 'phone', new_column_name='mobile')

def downgrade():
    op.alter_column('users', 'mobile', new_column_name='phone')

# Ù†ØªÛŒØ¬Ù‡: âœ… Ù†Ø§Ù… ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯
#       âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯
#       âš ï¸ Ø§Ú¯Ø± Ú©Ø¯ Ù‚Ø¯ÛŒÙ…ÛŒ `phone` Ø±Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø¯: Ø®Ø·Ø§!
```

---

### **4. Changing Data Type (Ø®Ø·Ø±Ù†Ø§Ú©)**
```python
# migration file: 004_change_email_type.py

def upgrade():
    # VARCHAR(255) â†’ TEXT
    op.alter_column('users', 'email', 
                    existing_type=sa.String(255),
                    type_=sa.Text())

def downgrade():
    op.alter_column('users', 'email',
                    existing_type=sa.Text(),
                    type_=sa.String(255))

# Ù†ØªÛŒØ¬Ù‡: âš ï¸ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯â€ŒØªØ± Ø§Ø² 255 Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯!
#       âŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø² Ø¯Ø³Øª Ù…ÛŒâ€ŒØ±ÙˆØ¯!
```

---

### **5. Adding NOT NULL Column (Ø®Ø·Ø±Ù†Ø§Ú©)**
```python
# migration file: 005_add_required_field.py

def upgrade():
    # âŒ Ø§Ø´ØªØ¨Ø§Ù‡!
    op.add_column('users', sa.Column('age', sa.Integer, nullable=False))

# Ù†ØªÛŒØ¬Ù‡: âŒ ERROR! Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ú†Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯ØŸ

# âœ… Ø±Ø§Ù‡ ØµØ­ÛŒØ­:
def upgrade():
    # Ù…Ø±Ø­Ù„Ù‡ 1: Ø³ØªÙˆÙ† NULL Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
    op.add_column('users', sa.Column('age', sa.Integer, nullable=True))
    
    # Ù…Ø±Ø­Ù„Ù‡ 2: Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯
    op.execute("UPDATE users SET age = 18 WHERE age IS NULL")
    
    # Ù…Ø±Ø­Ù„Ù‡ 3: Ø§Ù„Ø¢Ù† NOT NULL Ú©Ù†ÛŒØ¯
    op.alter_column('users', 'age', nullable=False)
```

---

## ğŸ”„ ÙÙ„Ùˆ Migration ØµØ­ÛŒØ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Migration File Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯               â”‚
â”‚    alembic revision --autogenerate -m "..." â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Migration Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯                 â”‚
â”‚    Ø¢ÛŒØ§ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ                   â”‚
â”‚    Ø¢ÛŒØ§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŸ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Migration Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ (Development)   â”‚
â”‚    alembic upgrade head                     â”‚
â”‚    Ú©Ø§Ø± Ú©Ø±Ø¯ØŸ Ø®ÙˆØ¨!                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Ú©Ø¯ Ø±Ø§ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒØ¯ (Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¨Ø§Ø´Ø¯)        â”‚
â”‚    Model â†’ Schema â†’ API                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ØªØ³Øª Ú©Ù†ÛŒØ¯                               â”‚
â”‚    Ù‡Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ùˆ Ù‚Ø¯ÛŒÙ… Ú©Ø§Ø± Ú©Ù†Ù†Ø¯ØŸ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Production Ù…ÛŒÚº Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ (Ø²Ù…Ø§Ù† Ú©Ù… ØªØ±Ø§ÙÛŒÚ©) â”‚
â”‚    Ø§Ù„Ø¢Ù† Ø®Ø·Ø± Ù†Ø¯Ø§Ø±Ø¯!                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Best Practices

### **1. Ù‡Ù…ÛŒØ´Ù‡ Downgrade Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯**
```python
def upgrade():
    op.add_column('users', sa.Column('phone', sa.String(20)))

def downgrade():
    op.drop_column('users', 'phone')
```

### **2. Atomic Migrations (Ø§ÛŒÙ…Ù†)**
```python
def upgrade():
    # ÛŒÚ© ØªØºÛŒÛŒØ± = ÛŒÚ© migration
    # Ø§Ú¯Ø± Ø®Ø·Ø§ Ø±Ø® Ø¯Ù‡Ø¯ØŒ ØªÙ…Ø§Ù… rollback Ù…ÛŒâ€ŒØ´ÙˆØ¯
    op.add_column('users', sa.Column('phone', sa.String(20)))

def downgrade():
    op.drop_column('users', 'phone')
```

### **3. Data Migrations (Ù…ÙˆØ§Ø±Ø¯ Ù¾ÛŒÚ†ÛŒØ¯Ù‡)**
```python
def upgrade():
    # Ù…Ø±Ø­Ù„Ù‡ 1: Ø³ØªÙˆÙ† Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
    op.add_column('users', sa.Column('full_name', sa.String(255), nullable=True))
    
    # Ù…Ø±Ø­Ù„Ù‡ 2: Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ØªØ±Ú©ÛŒØ¨ Ú©Ù†ÛŒØ¯
    op.execute("""
        UPDATE users 
        SET full_name = CONCAT(first_name, ' ', last_name)
    """)
    
    # Ù…Ø±Ø­Ù„Ù‡ 3: NOT NULL Ú©Ù†ÛŒØ¯
    op.alter_column('users', 'full_name', nullable=False)

def downgrade():
    op.drop_column('users', 'full_name')
```

---

## ğŸš¨ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¹Ø§Ù…

### **Ø®Ø·Ø§ 1: Ø§Ø¬Ø±Ø§ÛŒ Migration Ø¨Ø¯ÙˆÙ† Testing**
```
âŒ Production â†’ Migration fail
   â””â”€ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ù†ÛŒÙ…â€ŒÚ©Ø§Ø±Ù‡ Ø¨Ø±Ø§ÛŒ 2 Ø³Ø§Ø¹Øª!
```

### **Ø®Ø·Ø§ 2: ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Downgrade**
```python
def upgrade():
    op.add_column('users', sa.Column('age', sa.Integer))

def downgrade():
    pass  # âŒ Ø¨Ø¯ÙˆÙ† downgrade
    
# Ù†ØªÛŒØ¬Ù‡: Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ rollback Ú©Ù†Ø¯!
```

### **Ø®Ø·Ø§ 3: ØªØºÛŒÛŒØ±Ø§Øª Ù…ØªØ¹Ø¯Ø¯ Ø¯Ø± ÛŒÚ© Migration**
```python
def upgrade():
    op.add_column('users', sa.Column('age', sa.Integer))
    op.add_column('users', sa.Column('phone', sa.String(20)))
    op.drop_column('users', 'old_field')
    # âŒ Ø§Ú¯Ø± ÛŒÚ©ÛŒ fail Ø´ÙˆØ¯: Ù†Ø§Ù‚Øµ Ø§Ø³Øª!
```

---

## ğŸ“Š Ø®Ù„Ø§ØµÙ‡ Ø§Ù…Ù†/Ø®Ø·Ø±Ù†Ø§Ú©

| Ø¹Ù…Ù„ÛŒØ§Øª | Ø§Ù…Ù†ØŸ | Ù†Ú©ØªÙ‡ |
|--------|------|------|
| **ADD COLUMN (nullable)** | âœ… Ø®ÛŒÙ„ÛŒ Ø§Ù…Ù† | Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù…Ø­ÙÙˆØ¸ |
| **DROP COLUMN** | âŒ Ø®Ø·Ø±Ù†Ø§Ú© | Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù |
| **RENAME COLUMN** | âš ï¸ Ø§Ø­ØªÛŒØ§Ø· | Ú©Ø¯ Ù‚Ø¯ÛŒÙ… Ø´Ú©Ø³Øª Ø®ÙˆØ§Ù‡Ø¯ Ø®ÙˆØ±Ø¯ |
| **CHANGE TYPE** | âŒ Ø®ÛŒÙ„ÛŒ Ø®Ø·Ø±Ù†Ø§Ú© | Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¯Ø§Ø¯Ù‡ Ø­Ø°Ù Ø´ÙˆØ¯ |
| **ADD NOT NULL** | âŒ Ø®Ø·Ø±Ù†Ø§Ú© | Ø¯Ø§Ø¯Ù‡ Ù‚Ø¯ÛŒÙ… Ú†Ù‡ Ø¨Ø§Ø´Ø¯ØŸ |
| **INDEX ADD/DROP** | âœ… Ø§Ù…Ù† | ÙÙ‚Ø· Ø¹Ù…Ù„Ú©Ø±Ø¯ ØªØ­Øª ØªØ§Ø«ÛŒØ± |

---

## ğŸ¯ Ø¬ÙˆØ§Ø¨ Ø³Ø¤Ø§Ù„ØªØ§Ù†

### **Ø³Ø¤Ø§Ù„: Ø§Ú¯Ø± Ø¬Ø¯ÙˆÙ„ User Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ø¯ Ùˆ ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø¯Ù‡ÛŒÙ…ØŒ Ù…Ø§ÛŒÚ¯Ø±ÛŒØ´Ù† Ø¨Ù‡ Ù…Ø´Ú©Ù„ Ù†Ù…ÛŒâ€ŒØ®ÙˆØ±Ø¯ØŸ**

**Ø¬ÙˆØ§Ø¨:**
âœ… **Ù†Ù‡ØŒ Ù…Ø´Ú©Ù„ Ù†Ø®ÙˆØ±Ø¯!** Ø§Ú¯Ø± migration ØµØ­ÛŒØ­ Ù†ÙˆØ´ØªÙ‡ Ø´ÙˆØ¯

```python
# ØµØ­ÛŒØ­ âœ…
def upgrade():
    op.add_column('users', sa.Column('phone', sa.String(20), nullable=True))

# ØºÙ„Ø· âŒ
def upgrade():
    op.add_column('users', sa.Column('phone', sa.String(20), nullable=False))
    # Error: Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ú†Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯ØŸ
```

### **Ø³Ø¤Ø§Ù„: ØªÚ©Ù„ÛŒÙ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ú†Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ**

**Ø¬ÙˆØ§Ø¨:**
âœ… **Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯!** (Ø§Ú¯Ø± migration Ø¯Ø±Ø³Øª Ø¨Ø§Ø´Ø¯)

```sql
-- Ù‚Ø¨Ù„
users: id, username, email (2 Ø±Ùˆ)

-- migration: ADD COLUMN phone
alembic upgrade head

-- Ø¨Ø¹Ø¯
users: id, username, email, phone (Ù‡Ù…Ø§Ù† 2 Ø±Ùˆ + NULL Ø¨Ø±Ø§ÛŒ phone)
```

---

## ğŸ” Ù‚Ø§Ù†ÙˆÙ† Ø·Ù„Ø§ÛŒÛŒ

```
1. Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø§ØµÙ„:
   âœ… Reversible migrations Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯
   
2. Ù‡Ù…ÛŒØ´Ù‡ test Ú©Ù†ÛŒØ¯:
   Development â†’ Testing â†’ Production
   
3. Atomic Ø¨Ø§Ø´Ø¯:
   ÛŒØ§ ØªÙ…Ø§Ù… Ù…ÙˆÙÙ‚ ÛŒØ§ ØªÙ…Ø§Ù… rollback
   
4. Documentation:
   Ø¯Ù„ÛŒÙ„ ØªØºÛŒÛŒØ± Ø±Ø§ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ú©Ù†ÛŒØ¯
```

